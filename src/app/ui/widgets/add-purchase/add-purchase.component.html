<tui-loader [showLoader]="isLoading">
    <div class="container mx-auto">
        <div class="divider"><span class="font-bold text-lg text-primary">Purchase details</span></div>
        <div class="flex flex-row p-2 w-full">

            <div class="w-64">
                <tui-stepper [orientation]="'vertical'" [(activeItemIndex)]="currentStep">
                    <button tuiStep *ngFor="let entry of map|keyvalue" [state]="entry.value.status"
                        [icon]="entry.value.icon" [disabled]="entry.value.disable">
                        {{entry.value.name}}
                    </button>

                </tui-stepper>
            </div>
            <div class="flex-1">
                <div [ngSwitch]="currentStep">
                    <div *ngSwitchCase="0" class="my-2">
                        <app-product-autocomplete (select)="onProductSelect($event)"></app-product-autocomplete>
                    </div>
                    <div *ngSwitchCase="1" class="my-2 flex flex-col items-start w-full">
                        <span *ngIf="product.varients.length>0" class="text-gray-400 my-2">Select varient</span>
                        <div class="flex flex-row my-2" *ngFor="let varient of product.varients">
                            <button
                                [ngClass]="selectedVarient.varientCode==varient.varientCode?' btn btn-primary btn-sm mx-2':'mx-2 btn btn-sm btn-outline'"
                                (click)="onVarientSelect(varient)"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                                  </svg></button>
                            <div class="flex-1 text-lg fond-bold">{{varient.weight}} {{varient.unit}}</div>
                        </div>
                        <button class="btn btn-outline btn-primary w-1/3"
                            (click)="showAddVarientPanel=!showAddVarientPanel">Add another product varient</button>
                        <div *ngIf="showAddVarientPanel" class="w-full p-2 animate__animated animate__zoomInDown">
                            <app-product-varient (onVarientAdd)="addVarient($event)"></app-product-varient>
                        </div>
                    </div>
                </div>
                <div class="flex flex-row my-2 justify-end w-full">
                    <button class="btn btn-outline  mx-2" *ngIf="currentStep>0"
                        (click)="currentStep = currentStep-1">Previous</button>
                    <button class="btn  btn-primary mx-2" [disabled]="checkDisable()" *ngIf="currentStep<5"
                        (click)="currentStep = currentStep+1">Next</button>
                </div>

            </div>

        </div>
    </div>
</tui-loader>